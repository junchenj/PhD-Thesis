\chapter{Improving QoE via Exploration and Exploitation at Scale}
\label{ch:pytheas}

\input{pytheas-macros}
\renewcommand{\name}{{Pytheas}\xspace}
\providecommand{\mab}{{E2}\xspace}
\providecommand{\mablong}{{exploration and exploitation}\xspace}
\providecommand{\control}{{control}\xspace}
\providecommand{\idea}{{group-based \mab}\xspace}
\providecommand{\Idea}{{Group-based \mab}\xspace}

In the previous two chapters,
we have formulated the \ddn process as a
%Content providers are increasingly using data-driven
%mechanisms to optimize quality of experience (QoE).
%Many existing approaches formulate this process as a
prediction problem of learning optimal decisions (e.g.,
server, bitrate, relay) based on observed QoE of recent
sessions. While prediction-based mechanisms have
shown promising QoE improvements, they are necessarily
incomplete as they: (1) suffer from many known biases
(e.g., incomplete visibility) and (2) cannot respond
to sudden changes (e.g., load changes). Drawing a parallel
from machine learning, we argue that data-driven
QoE optimization should instead be cast as a real-time
exploration and exploitation (E2) process rather than as
a prediction problem. Adopting E2 in network applications,
however, introduces key architectural (e.g., how
to update decisions in real time with fresh data) and algorithmic
(e.g., capturing complex interactions between
session features vs. QoE) challenges. 

In this chapter, we present Pytheas,
a framework which addresses these challenges using
a group-based E2 mechanism. 
Inspired by the insight of persistent structures, we
observe that application
sessions sharing the same features (e.g., IP prefix, 
location) can be grouped so that we can run E2 algorithms
at a per-group granularity. This naturally captures
the complex interactions and is amenable to realtime
control with fresh measurements. Using an end-to-end
implementation and a proof-of-concept deployment
in CloudLab, we show that Pytheas improves video
QoE over a state-of-the-art prediction-based system by
up to 31\% on average and 78\% on 90th percentile of 
per-session QoE.

This chapter is organized as follows.
We begin with the limitation of prediction-based workflow (Section~\ref{sec:pytheas:limitations}) 
and why real-time \mab is a better abstraction
for \ddn (Section~\ref{sec:pytheas:casting}),
and then articulate key technical challenges for real-time \mab and outline the design rationale behind \name (Section~\ref{sec:pytheas:overview}).
We then present \name in more details from both algorithmic perspective (Section~\ref{sec:pytheas:algo}), and architectural (Section~\ref{sec:pytheas:system}) and an implementation perspective (Section~\ref{sec:pytheas:impl}).
Finally, we evaluate the performance of \name in Section~\ref{sec:pytheas:eval}, discuss related work in Section~\ref{sec:pytheas:related}, and summarize the section in Section~\ref{sec:pytheas:summary}.

\input{pytheas-limitations}

\input{pytheas-casting}

\input{pytheas-overview}

\input{pytheas-algo}

\input{pytheas-system}

\input{pytheas-impl}

\input{pytheas-eval}

%\input{pytheas-discuss}

\input{pytheas-related}

\section{Summary}
\label{sec:pytheas:summary}

%With increasing demands of user QoE and diverse operating
%conditions, application providers are on an inevitable
%trajectory to adopt data-driven techniques. 
While previous two chapters
have achieved impressive QoE improvement by formulating \ddn as a 
prediction process, they have key limitations
%However, existing prediction-based approaches have key limitations
that curtail the potential of data-driven optimization.
Drawing on a parallel from machine learning, we
argue that real-time exploration and exploitation is a better
abstraction for this domain. In designing Pytheas, we
addressed key practical challenges in applying real-time
E2 to network applications. Our key insight is a {\em group-based
E2} mechanism, inspired by the insight of persistent structures in
QoE-determining factors. We observe that application sessions sharing
the same features can be grouped so that we can run
E2 at a coarser per-group granularity. Using an end-to-end
implementation and proof-of-concept deployment of
Pytheas in CloudLab, we showed that Pytheas improves
video quality over state-of-the-art prediction-based system
by 6-31\% on mean, and 24-78\% on tail QoE.




